# =====================================================
# Production Profile Configuration
# Plateforme de Recrutement Intelligente
# =====================================================
# This profile is used for Docker/production deployments
# Most values are overridden by environment variables
# =====================================================

# =====================================================
# Application Configuration
# =====================================================
spring.application.name=recrutement-intelligent
server.port=${BACKEND_PORT:8080}

# =====================================================
# Database Configuration (from Docker environment)
# =====================================================
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://postgres:5432/recrutement}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:recrutement}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:recrutement123}
spring.datasource.driver-class-name=org.postgresql.Driver

# HikariCP Configuration
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.auto-commit=false

# =====================================================
# JPA / Hibernate Configuration
# =====================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# =====================================================
# OpenAI Configuration (from environment)
# =====================================================
spring.ai.openai.api-key=${SPRING_AI_OPENAI_API_KEY}
spring.ai.openai.chat.options.model=${SPRING_AI_OPENAI_CHAT_OPTIONS_MODEL:gpt-4}
spring.ai.openai.chat.options.temperature=${SPRING_AI_OPENAI_CHAT_OPTIONS_TEMPERATURE:0.7}
spring.ai.openai.chat.options.max-tokens=${SPRING_AI_OPENAI_CHAT_OPTIONS_MAX_TOKENS:2000}

# =====================================================
# Embedding Model Configuration
# =====================================================
spring.ai.openai.embedding.options.model=${SPRING_AI_OPENAI_EMBEDDING_OPTIONS_MODEL:text-embedding-3-small}
spring.ai.openai.embedding.options.dimensions=${SPRING_AI_OPENAI_EMBEDDING_OPTIONS_DIMENSIONS:1536}

# =====================================================
# Vector Store Configuration (PgVector)
# =====================================================
spring.ai.vectorstore.pgvector.index-type=${SPRING_AI_VECTORSTORE_PGVECTOR_INDEX_TYPE:IVFFLAT}
spring.ai.vectorstore.pgvector.distance-type=${SPRING_AI_VECTORSTORE_PGVECTOR_DISTANCE_TYPE:COSINE_DISTANCE}
spring.ai.vectorstore.pgvector.dimensions=${SPRING_AI_VECTORSTORE_PGVECTOR_DIMENSIONS:1536}

# PgVector Connection
spring.ai.vectorstore.pgvector.host=${SPRING_AI_VECTORSTORE_PGVECTOR_HOST:postgres}
spring.ai.vectorstore.pgvector.port=${SPRING_AI_VECTORSTORE_PGVECTOR_PORT:5432}
spring.ai.vectorstore.pgvector.database=${SPRING_AI_VECTORSTORE_PGVECTOR_DATABASE:recrutement}
spring.ai.vectorstore.pgvector.username=${SPRING_AI_VECTORSTORE_PGVECTOR_USERNAME:recrutement}
spring.ai.vectorstore.pgvector.password=${SPRING_AI_VECTORSTORE_PGVECTOR_PASSWORD:recrutement123}
spring.ai.vectorstore.pgvector.table-name=cv_embeddings

# PgVector Index Configuration
spring.ai.vectorstore.pgvector.create-schema=true
spring.ai.vectorstore.pgvector.initialize-schema=true

# =====================================================
# JWT Configuration (from environment)
# =====================================================
jwt.secret=${JWT_SECRET}
jwt.expiration=86400000
jwt.refresh-expiration=604800000

# =====================================================
# File Upload Configuration
# =====================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

file.upload-dir=${FILE_UPLOAD_DIR:/app/uploads/cv}

# =====================================================
# CORS Configuration (from environment)
# =====================================================
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:4200}
cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true
cors.max-age=3600

# =====================================================
# Logging Configuration (from environment)
# =====================================================
logging.level.root=${LOGGING_LEVEL_ROOT:INFO}
logging.level.ma.recrutement=${LOGGING_LEVEL_MA_RECRUTEMENT:DEBUG}
logging.level.org.springframework.web=${LOGGING_LEVEL_SPRING:INFO}
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF

# =====================================================
# SpringDoc OpenAPI (Swagger)
# =====================================================
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha

springdoc.packages-to-scan=ma.recrutement.controller
springdoc.paths-to-match=/api/**

# =====================================================
# Production-specific
# =====================================================
spring.devtools.restart.enabled=false
